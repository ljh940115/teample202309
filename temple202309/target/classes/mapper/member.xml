<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.member">
	<!-- 리절트 맵 정의 -->
	<!-- 회원정보를 저장할 resultMap 정의, property:get메서드, column:조회 열 -->
	<resultMap id="memberResult" type="MemberVO">
		<result property="userid" column="userid" />
		<result property="userpw" column="userpw" />
		<result property="username" column="username" />
		<result property="userphone" column="userphone" />
		<result property="regdate" column="regdate" />
		<result property="updatedate" column="updatedate" />
	</resultMap>

	<!-- resultType:값을 반환할 곳 , parameterType:해시맵 지정 -->
	<!-- 로그인 처리 -->
	<select id="login" resultType="memberVO"
		parameterType="java.util.Map">
	    <![CDATA[
			select * member where member_id=#{member_id} and member_pw=#{member_pw}			
		]]>
	</select>

	<!-- ID 중복 확인 처리 -->
	<select id="selectOverlappedID" parameterType="String"
		resultType="String">
		select decode(count(*),1, 'true', 0, 'false')
		from member
		where userid = #{id}
	</select>

	<!-- 회원가입 처리, 회원가입 창에서 입력한 값을 테이블에 추가합니다. -->
	<insert id="insertNewMember" parameterType="memberVO">
	  <![CDATA[
	    	insert into member(userid, userpw, username, userphone) 
	    	values(#{userid}, #{userpw}, #{username}, #{userphone})
	   ]]>
	</insert>
</mapper>